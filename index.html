<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distory Go - V23 Plus Stable</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg: #02050e; --panel: rgba(8, 12, 28, 0.98); --border: #1c2a4d; --blue: #3b82f6; --red: #be123c; }
        body { background: var(--bg); color: white; font-family: 'Rajdhani', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        
        /* Animations */
        @keyframes scan { 0% { top: -10%; opacity: 0; } 50% { opacity: 0.5; } 100% { top: 110%; opacity: 0; } }
        .laser { position: absolute; width: 100%; height: 2px; background: var(--blue); box-shadow: 0 0 15px var(--blue); z-index: 100; pointer-events: none; opacity: 0; }
        .scanning { animation: scan 0.6s linear; }
        
        /* Layout */
        .layout { display: grid; grid-template-columns: 320px 1fr 300px; gap: 12px; height: 100vh; padding: 12px; }
        .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        /* Elements */
        .hp-bar-fill { height: 100%; background: var(--red); transition: width 0.4s ease; }
        .slot { aspect-ratio: 1; background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; transition: 0.2s; }
        .slot:hover { border-color: var(--blue); transform: scale(1.05); }
        .slot-eq { border-color: var(--blue); box-shadow: inset 0 0 10px rgba(59, 130, 246, 0.2); }
        
        .btn-relancer { width: 100%; height: 70px; background: linear-gradient(180deg, #3259ce, #1e3a8a); border-radius: 6px; border: 1px solid #4a74e8; color: white; font-weight: 700; font-size: 24px; text-transform: uppercase; cursor: pointer; }
        .btn-relancer:active { transform: scale(0.96); }

        .modal { position: fixed; inset: 0; background: var(--bg); z-index: 50000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .avatar-btn { font-size: 70px; padding: 20px; background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 12px; cursor: pointer; transition: 0.3s; }
        .avatar-btn:hover { border-color: var(--blue); transform: scale(1.1); }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="laser-fx" class="laser"></div>

    <div id="boot-screen" class="modal">
        <h1 class="text-3xl font-bold mb-10 tracking-widest text-blue-400 uppercase">Unit√© V23+</h1>
        <div class="grid grid-cols-3 gap-6">
            <button class="avatar-btn" onclick="Core.select('üêô')">üêô</button>
            <button class="avatar-btn" onclick="Core.select('üêπ')">üêπ</button>
            <button class="avatar-btn" onclick="Core.select('ü¶ä')">ü¶ä</button>
            <button class="avatar-btn" onclick="Core.select('ü¶å')">ü¶å</button>
            <button class="avatar-btn" onclick="Core.select('üêï')">üêï</button>
            <button class="avatar-btn" onclick="Core.select('üê±')">üê±</button>
        </div>
    </div>

    <div id="game-ui" class="layout hidden">
        <div class="panel">
            <div class="p-4 flex justify-between border-b border-slate-800"><span class="text-xs font-bold text-blue-300">PILOTE</span><span id="ui-pseudo" class="text-xs font-bold text-blue-500">UNIT√â_01</span></div>
            <div class="flex-grow flex items-center justify-center"><div id="ui-avatar" class="text-9xl" style="filter: drop-shadow(0 0 20px #3b82f6)"></div></div>
            <div class="px-6 mb-4">
                <div class="flex justify-between text-[11px] font-bold mb-1 uppercase">INT√âGRIT√â <span id="ui-hp-txt">100/100</span></div>
                <div class="w-full h-2 bg-black border border-slate-800 rounded-full overflow-hidden"><div id="ui-hp-fill" class="hp-bar-fill"></div></div>
            </div>
            <div class="px-6 pb-6 grid grid-cols-2 gap-3">
                <div class="stat-box"><div class="stat-label text-[9px] text-gray-500 font-bold uppercase">PUISSANCE</div><div id="ui-atk" class="text-2xl font-bold text-blue-400">10</div></div>
                <div class="stat-box"><div class="stat-label text-[9px] text-gray-500 font-bold uppercase">BLINDAGE</div><div id="ui-def" class="text-2xl font-bold text-blue-400">0</div></div>
            </div>
            <div class="p-4 border-t border-slate-800 grid grid-cols-3 gap-2"><div id="s-w" class="slot">‚öîÔ∏è</div><div id="s-h" class="slot">üõ°Ô∏è</div><div id="s-p" class="slot">üêæ</div></div>
        </div>

        <div class="panel">
            <div class="p-4 flex justify-between border-b border-slate-800"><span class="text-xs font-bold text-blue-300 uppercase">ZONE 1-1</span><div class="flex gap-4 font-bold text-xs"><span class="text-yellow-400">ü™ô <span id="ui-gold">0</span></span><span class="text-purple-400">‚ú® <span id="ui-perls">0</span></span></div></div>
            <div class="flex-grow flex flex-col items-center justify-center">
                <div id="enemy-box" class="hidden text-center"><div id="ui-en-img" style="font-size: 150px; filter: drop-shadow(0 0 20px red);">üëæ</div></div>
                <div id="story-box" class="text-center"><div class="text-7xl font-bold">MISSION</div><div class="mt-2 py-1 px-6 border border-slate-700 rounded-full text-xs text-gray-500 uppercase">Secteur 1</div></div>
            </div>
            <div class="p-4 border-t border-slate-800 grid grid-cols-[1fr_180px] gap-4 h-48">
                <div><div class="flex justify-between mb-2"><span class="text-[10px] text-gray-500 font-bold uppercase">STOCKAGE</span><button onclick="Core.chest()" class="bg-purple-600 text-white text-[9px] px-2 py-1 rounded font-bold">COFFRE (5‚ú®)</button></div><div id="inv-grid" class="grid grid-cols-6 gap-2"></div></div>
                <div class="flex flex-col justify-end"><button onclick="Core.scan()" class="btn-relancer">RELANCER</button><div class="mt-2 text-[10px] text-gray-600 font-bold text-center">AUTO: ON | VIT: x2</div></div>
            </div>
        </div>

        <div class="panel">
            <div class="p-4 border-b border-slate-800 font-bold text-xs text-blue-300">JOURNAL DE BORD</div>
            <div id="logs" class="flex-grow p-4 overflow-y-auto text-xs text-blue-200 flex flex-col-reverse"></div>
        </div>
    </div>

    <script>
        const DATA = { enemies: [{n:"Drone", i:"üõ∏", h:50, a:5}], items: [{n:"Lame", e:"‚öîÔ∏è", s:10, t:"weapon"}] };
        let P = { char:null, gold:0, perls:20, stats:{hp:0, atk:0, def:0}, inv:[], eq:{weapon:null, head:null, pet:null} };
        let R = { day:0, hp:100, max:100, atk:10, def:0, auto:true, processing:false };
        let C = { active:false, h:0, a:0 };

        const Core = {
            select: (e) => { P.char = e; document.getElementById('boot-screen').classList.add('hidden'); document.getElementById('game-ui').classList.remove('hidden'); UI.upd(); },
            scan: () => {
                if(R.processing || C.active) return; R.processing = true;
                const laser = document.getElementById('laser-fx'); laser.classList.add('scanning');
                setTimeout(() => {
                    laser.classList.remove('scanning'); R.day++; Core.stats();
                    if(R.day % 5 === 0) Core.fight();
                    else { P.gold += 20; UI.log("> Ressources (+20 Or)"); UI.upd(); R.processing = false; if(R.auto) setTimeout(Core.scan, 800); }
                }, 600);
            },
            fight: () => { C.active = true; let en = DATA.enemies[0]; C.h = en.h * (1+R.day*0.1); C.a = en.a; UI.scene('com'); Core.turn(); },
            turn: () => {
                C.h -= R.atk; if(C.h <= 0) { C.active = false; P.gold += 50; UI.log("> Victoire !"); UI.scene('adv'); R.processing = false; UI.upd(); if(R.auto) setTimeout(Core.scan, 800); return; }
                R.hp -= Math.max(1, C.a - R.def); UI.upd();
                if(R.hp <= 0) { C.active = false; R.day = 0; UI.log("> √âchec mission."); UI.scene('adv'); R.processing = false; }
                else setTimeout(Core.turn, 400);
            },
            stats: () => { R.max = 100 + (P.stats.hp*20); R.atk = 10 + (P.stats.atk*5); R.def = P.stats.def*2; if(P.eq.weapon) R.atk += P.eq.weapon.s; R.hp = Math.min(R.hp, R.max); },
            chest: () => { if(P.perls >= 5) { P.perls -= 5; P.inv.push({...DATA.items[0], uid:Date.now()}); Core.fusion(); UI.upd(); } },
            fusion: () => {
                let counts = {}; P.inv.forEach(i => counts[i.n] = (counts[i.n] || 0) + 1);
                for(let n in counts) if(counts[n] >= 3) { P.inv = P.inv.filter(x => x.n !== n); P.inv.push({...DATA.items[0], s:25, n:n+"+"}); UI.log("> FUSION R√âUSSIE"); Core.fusion(); break; }
            },
            equip: (id) => { let idx = P.inv.findIndex(x => x.uid === id); let it = P.inv[idx]; if(P.eq[it.t]) P.inv.push(P.eq[it.t]); P.eq[it.t] = it; P.inv.splice(idx, 1); Core.stats(); UI.upd(); },
            save: () => localStorage.setItem('distory_v23', JSON.stringify(P)),
            hardReset: () => { localStorage.clear(); location.reload(); }
        };

        const UI = {
            upd: () => {
                document.getElementById('ui-gold').innerText = P.gold; document.getElementById('ui-perls').innerText = P.perls;
                document.getElementById('ui-atk').innerText = R.atk; document.getElementById('ui-def').innerText = R.def;
                document.getElementById('ui-hp-txt').innerText = `${Math.floor(R.hp)}/${R.max}`;
                document.getElementById('ui-hp-fill').style.width = (R.hp/R.max*100) + "%";
                document.getElementById('ui-avatar').innerText = P.char;
                let g = document.getElementById('inv-grid'); g.innerHTML = '';
                P.inv.forEach(i => { let d = document.createElement('div'); d.className = "slot"; d.innerText = i.e; d.onclick = () => Core.equip(i.uid); g.appendChild(d); });
                const set = (id, it) => { document.getElementById(id).innerText = it ? it.e : ""; document.getElementById(id).className = it ? "slot slot-eq" : "slot"; };
                set('s-w', P.eq.weapon);
            },
            scene: (s) => { document.getElementById('enemy-box').classList.toggle('hidden', s !== 'com'); document.getElementById('story-box').classList.toggle('hidden', s === 'com'); },
            log: (m) => { let l = document.getElementById('logs'); l.innerHTML = `<div class="mb-1">${m}</div>` + l.innerHTML; }
        };
    </script>
</body>
</html>
