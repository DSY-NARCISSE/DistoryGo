<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distory Go - V50 HYPER-NEON</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg: #03010a; --border: #581c87; --accent: #a855f7; --cyan: #22d3ee; }
        body { background: var(--bg); color: #f5f3ff; font-family: 'JetBrains Mono', monospace; overflow: hidden; height: 100vh; user-select: none; }
        
        /* EFFET SCAN LASER */
        @keyframes scanMove { 0% { top: -10%; opacity: 0; } 50% { opacity: 0.5; } 100% { top: 110%; opacity: 0; } }
        .laser-scan { position: fixed; left: 0; width: 100%; height: 2px; background: var(--cyan); box-shadow: 0 0 15px var(--cyan); z-index: 10000; pointer-events: none; display: none; }
        .scanning { display: block; animation: scanMove 0.6s linear; }

        /* ANIMATIONS HUD */
        @keyframes neonPulse { 0%, 100% { box-shadow: 0 0 10px rgba(168, 85, 247, 0.2); border-color: var(--border); } 50% { box-shadow: 0 0 25px rgba(168, 85, 247, 0.5); border-color: var(--accent); } }
        .layout { display: grid; grid-template-columns: 320px 1fr 320px; height: 100vh; gap: 1px; background: var(--border); transition: filter 0.5s; }
        .panel { background: rgba(15, 5, 35, 0.95); animation: neonPulse 4s infinite; }

        /* ENTIT√âS ANIM√âES */
        @keyframes heroFloat { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-10px) scale(1.05); } }
        .entity-img { font-size: 100px; filter: drop-shadow(0 0 20px var(--accent)); animation: heroFloat 3s infinite ease-in-out; }
        .entity-hit { animation: shake 0.2s cubic-bezier(.36,.07,.19,.97) both !important; filter: brightness(2) !important; }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-6px, 0, 0); } 40%, 60% { transform: translate3d(6px, 0, 0); } }

        /* BOUTONS */
        .btn-exe { width: 100%; padding: 20px; background: #000; border: 1px solid var(--accent); color: var(--accent); font-weight: 800; font-size: 18px; letter-spacing: 5px; cursor: pointer; text-transform: uppercase; transition: 0.2s; position: relative; overflow: hidden; }
        .btn-exe:hover { background: var(--accent); color: white; box-shadow: 0 0 40px var(--accent); transform: translateY(-2px); }
        .btn-exe:active { transform: translateY(2px); }

        /* PROGRESSION */
        .bar-fill { height: 100%; background: var(--accent); transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 0 15px var(--accent); }

        /* SELECTION AVATAR */
        .avatar-btn { font-size: 70px; padding: 25px; background: rgba(255,255,255,0.02); border: 2px solid var(--border); border-radius: 20px; cursor: pointer; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .avatar-btn:hover { border-color: var(--cyan); transform: scale(1.2) rotate(5deg); background: rgba(168, 85, 247, 0.15); box-shadow: 0 0 40px var(--accent); }

        /* FUSION FX */
        .fusion-flash { position: fixed; inset: 0; background: white; opacity: 0; pointer-events: none; z-index: 200000; transition: opacity 0.1s; }
        
        #tooltip { position: fixed; pointer-events: none; z-index: 10000; background: rgba(0,0,0,0.9); border: 1px solid var(--cyan); padding: 12px; font-size: 11px; border-radius: 8px; backdrop-filter: blur(5px); }
        .hidden { display: none !important; }
        .toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: var(--cyan); color: black; padding: 10px 30px; font-weight: 800; z-index: 100000; border-radius: 50px; animation: toastPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes toastPop { from { transform: translateX(-50%) translateY(-50px) scale(0); } to { transform: translateX(-50%) translateY(0) scale(1); } }
    </style>
</head>
<body class="bg-black">

    <div id="laser" class="laser-scan"></div>
    <div id="flash" class="fusion-flash"></div>
    <div id="tooltip"></div>
    <div id="toast-layer" class="fixed inset-x-0 top-5 flex flex-col items-center pointer-events-none z-[60000]"></div>

    <div id="boot-screen" class="fixed inset-0 bg-[#05010d] z-[50000] flex flex-col items-center justify-center p-10">
        <div class="text-xs text-purple-400 font-bold tracking-[15px] mb-4 animate-pulse">INIT_BIOS_NEBULA</div>
        <h1 class="text-6xl font-black text-white mb-16 italic tracking-tighter">OCTO<span class="text-purple-500">.</span>GO</h1>
        <div class="grid grid-cols-3 gap-8">
            <button class="avatar-btn" onclick="Core.selectSpecies('üêô')">üêô</button>
            <button class="avatar-btn" onclick="Core.selectSpecies('üêπ')">üêπ</button>
            <button class="avatar-btn" onclick="Core.selectSpecies('ü¶ä')">ü¶ä</button>
            <button class="avatar-btn" onclick="Core.selectSpecies('ü¶å')">ü¶å</button>
            <button class="avatar-btn" onclick="Core.selectSpecies('üêï')">üêï</button>
            <button class="avatar-btn" onclick="Core.selectSpecies('üê±')">üê±</button>
        </div>
        <button onclick="Core.hardReset()" class="mt-20 text-[10px] text-gray-700 hover:text-red-500 uppercase tracking-widest transition">Purge Totale des Donn√©es</button>
    </div>

    <div id="game-ui" class="layout blur">
        <div class="side-panel p-6 flex flex-col border-r border-purple-900/50">
            <div class="label-tech">Bio_Unit_Status</div>
            <div id="ui-avatar-display" class="text-9xl py-10 flex justify-center">?</div>

            <div class="space-y-6">
                <div>
                    <div class="flex justify-between text-[10px] font-bold uppercase tracking-widest">Int√©grit√© <span id="ui-hp-txt">100/100</span></div>
                    <div class="h-2 bg-purple-950 rounded-full mt-2 overflow-hidden"><div id="ui-hp-fill" class="bar-fill"></div></div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="border-b border-purple-500/30 pb-2"><div class="label-tech" style="color:var(--cyan)">Attaque</div><div id="ui-atk" class="text-3xl font-black">10</div></div>
                    <div class="border-b border-purple-500/30 pb-2"><div class="label-tech">D√©fense</div><div id="ui-def" class="text-3xl font-black">0</div></div>
                </div>
            </div>

            <div class="mt-auto grid grid-cols-3 gap-2">
                <div id="slot-weapon" class="h-16 border border-purple-900 rounded flex items-center justify-center text-2xl bg-black/40">‚öîÔ∏è</div>
                <div id="slot-head" class="h-16 border border-purple-900 rounded flex items-center justify-center text-2xl bg-black/40">üõ°Ô∏è</div>
                <div id="slot-pet" class="h-16 border border-purple-900 rounded flex items-center justify-center text-2xl bg-black/40">üêæ</div>
            </div>
        </div>

        <div class="main-view border-x border-purple-900/50">
            <div class="p-6 flex justify-between bg-black/60 border-b border-purple-900/30">
                <div class="font-bold text-white text-sm">CYCLE_<span id="ui-day">1</span></div>
                <div class="flex gap-10 font-bold text-xs">
                    <span class="text-yellow-400">ü™ô <span id="ui-gold">0</span></span>
                    <span class="text-cyan-400">‚öõÔ∏è <span id="ui-perls">0</span></span>
                </div>
            </div>

            <div class="display-area" id="main-viewport">
                <div id="enemy-box" class="hidden text-center scale-125">
                    <div id="ui-en-img" class="entity-img mb-6">üëæ</div>
                    <div class="label-tech" style="color:red; animation: blink 0.5s infinite;">Cible_Verrouill√©e</div>
                    <div class="w-64 h-1 bg-red-900/20 mt-4 mx-auto overflow-hidden"><div id="ui-en-hp" class="h-full bg-red-500"></div></div>
                </div>
                <div id="story-box" class="text-center">
                    <div id="ui-hero-center" class="entity-img mb-10">?</div>
                    <div class="text-4xl font-black tracking-tighter mb-2">ZONE_D'EXPLORATION</div>
                    <div class="label-tech opacity-40">Scan orbital en cours...</div>
                </div>
            </div>

            <div class="p-10 bg-black/80 border-t border-purple-900">
                <div class="flex gap-4 mb-6">
                    <button onclick="Core.toggleAuto()" id="ui-auto" class="flex-1 py-3 border border-purple-900 text-[10px] font-bold transition-all">AUTO: OFF</button>
                    <button onclick="Core.toggleSpeed()" id="ui-speed" class="flex-1 py-3 border border-purple-900 text-[10px] font-bold transition-all">VIT: x1</button>
                    <button onclick="UI.modal('settings')" class="w-16 border border-purple-900">‚öôÔ∏è</button>
                </div>
                <button id="main-btn" onclick="Core.processScanner()" class="btn-exe">Scanner Secteur</button>
            </div>
        </div>

        <div class="side-panel p-6 flex flex-col border-l border-purple-900/50">
            <div class="label-tech mb-6">Modules_Syst√®me</div>
            <div id="skill-list" class="flex-grow overflow-y-auto pr-2 space-y-2"></div>

            <div class="border-t border-purple-900 pt-6 mt-4">
                <div class="flex justify-between items-center mb-4">
                    <div class="label-tech">Soute</div>
                    <button onclick="Core.fusion()" class="text-[9px] bg-cyan-600 text-black px-3 py-1 font-bold rounded-full hover:scale-110 transition">FUSION_3X</button>
                </div>
                <div id="inv-grid" class="grid grid-cols-3 gap-2 h-40 overflow-y-auto mb-4"></div>
                <button onclick="Core.chest()" class="btn-exe !py-4 !text-xs !bg-purple-900 !text-white border-none hover:shadow-[0_0_20px_#a855f7]">D√âCRYPTER (5‚öõÔ∏è)</button>
                <button onclick="UI.showHub()" class="w-full mt-6 py-2 text-[10px] text-purple-500 hover:text-white uppercase tracking-widest transition">Base_Am√©lioration</button>
            </div>
        </div>
    </div>

    <div id="hub-view" class="fixed inset-0 bg-[#03010a] z-[60000] hidden flex-col items-center justify-center">
        <h2 class="text-5xl font-black text-white mb-20 tracking-[15px] uppercase">Maintenance</h2>
        <div class="grid grid-cols-1 gap-6 w-96">
            <div onclick="Core.upgradeBase('hp')" class="border border-purple-900 p-6 bg-white/5 hover:border-cyan-400 cursor-pointer transition flex justify-between items-center">
                <div><div class="label-tech">Vitalit√©</div><div class="text-2xl font-black text-white">HP +20</div></div>
                <div class="text-yellow-500 font-bold" id="up-hp-cost">100 ü™ô</div>
            </div>
            <div onclick="Core.upgradeBase('atk')" class="border border-purple-900 p-6 bg-white/5 hover:border-cyan-400 cursor-pointer transition flex justify-between items-center">
                <div><div class="label-tech">Puissance</div><div class="text-2xl font-black text-white">ATK +5</div></div>
                <div class="text-yellow-500 font-bold" id="up-atk-cost">100 ü™ô</div>
            </div>
            <div onclick="Core.upgradeBase('def')" class="border border-purple-900 p-6 bg-white/5 hover:border-cyan-400 cursor-pointer transition flex justify-between items-center">
                <div><div class="label-tech">Blindage</div><div class="text-2xl font-black text-white">DEF +2</div></div>
                <div class="text-yellow-500 font-bold" id="up-def-cost">100 ü™ô</div>
            </div>
        </div>
        <button onclick="UI.hideHub()" class="mt-20 text-purple-400 border-b-2 border-purple-900 pb-2 hover:text-white tracking-[10px] uppercase">Retour_Vaisseau</button>
    </div>

    <div id="modal-container" class="hidden"></div>

    <script>
        const DATA = {
            enemies: [{n:"Drone Pirate", i:"üõ∏", h:50, a:5}, {n:"Virus", i:"üëæ", h:70, a:9}, {n:"Sonde", i:"üõ∞Ô∏è", h:40, a:12}],
            boss: [{n:"KRAKEN", i:"ü¶ë", h:800, a:30}],
            items: [
                {n:"Laser", e:"üî´", s:10, t:"weapon", r:"r-common", d:"D√©g√¢ts +10"},
                {n:"Blindage", e:"üõ°Ô∏è", s:20, t:"head", r:"r-common", d:"PV +20"},
                {n:"Sonde IA", e:"ü§ñ", s:5, t:"pet", r:"r-common", d:"Stats +5"}
            ],
            skills: {
                'fire': {n:"Plasma", i:"üî•", d:"+5 ATK par niveau."},
                'heal': {n:"R√©paration", i:"üíâ", d:"+5% PV par cycle."},
                'shield': {n:"Bouclier", i:"üõ°Ô∏è", d:"+2 DEF par niveau."}
            }
        };

        let Player = { char:null, gold:0, perls:20, stats:{hp:0, atk:0, def:0}, inv:[], eq:{weapon:null, head:null, pet:null}, skills:[] };
        let Run = { active:false, day:0, hp:100, max:100, atk:10, def:0, auto:false, speed:1 };
        let Combat = { active:false, h:0, m:0, a:0 };

        const Core = {
            initGame: () => {
                let save = localStorage.getItem('distory_v50');
                if(save) {
                    Player = JSON.parse(save);
                    if(Player.char) {
                        document.getElementById('boot-screen').classList.add('hidden');
                        document.getElementById('game-ui').classList.remove('blur');
                        UI.refresh();
                    }
                }
            },

            selectSpecies: (emoji) => {
                Player.char = emoji;
                Player.eq = { weapon: {...DATA.items[0], uid:1}, head: {...DATA.items[1], uid:2}, pet: {...DATA.items[2], uid:3} };
                Core.saveGame();
                document.getElementById('boot-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('boot-screen').classList.add('hidden');
                    document.getElementById('game-ui').classList.remove('blur');
                    UI.refresh();
                    UI.toast("UNIT√â_PR√äTE");
                }, 500);
            },

            processScanner: () => {
                if(!Run.active) { Core.startRun(); return; }
                if(Combat.active) return;
                
                // Animation laser
                const laser = document.getElementById('laser');
                laser.classList.add('scanning');
                setTimeout(() => laser.classList.remove('scanning'), 600);

                Core.nextCycle();
            },

            startRun: () => {
                Run.active = true; Run.day = 1;
                Core.updateStats();
                Run.hp = Run.max;
                UI.scene('adv');
                UI.showSkillChoice();
            },

            nextCycle: () => {
                Run.day++;
                Core.updateStats();
                if(Run.day % 10 === 0) Core.startCombat(true);
                else if(Run.day % 5 === 0) Core.startCombat(false);
                else {
                    if(Math.random() < 0.25) UI.showSkillChoice();
                    else {
                        Player.gold += 30;
                        UI.toast("+30 ü™ô");
                        UI.refresh();
                        Core.checkAuto();
                    }
                }
            },

            startCombat: (isBoss) => {
                Combat.active = true;
                let en = isBoss ? DATA.boss[0] : DATA.enemies[Math.floor(Math.random()*3)];
                Combat.m = en.h * (1 + Run.day*0.1); Combat.h = Combat.m;
                Combat.a = en.a * (1 + Run.day*0.05);
                UI.scene('com');
                document.getElementById('ui-en-img').innerText = en.i;
                UI.refresh();
                setTimeout(Core.combatTurn, 1000/Run.speed);
            },

            combatTurn: () => {
                if(!Combat.active) return;
                // Joueur frappe
                Combat.h -= Run.atk;
                UI.shake('ui-en-img');
                if(Combat.h <= 0) { setTimeout(Core.endCombat, 500/Run.speed); return; }
                
                // Ennemi frappe
                setTimeout(() => {
                    Run.hp -= Math.max(1, Combat.a - Run.def);
                    UI.shake('game-ui');
                    UI.refresh();
                    if(Run.hp <= 0) Core.failRun();
                    else setTimeout(Core.combatTurn, 800/Run.speed);
                }, 400/Run.speed);
            },

            endCombat: () => { Combat.active = false; Player.gold += 50; UI.toast("VICTOIRE !"); UI.scene('adv'); UI.refresh(); Core.saveGame(); Core.checkAuto(); },
            failRun: () => { Run.active = false; Combat.active = false; UI.toast("CRASH..."); UI.scene('adv'); UI.refresh(); },

            updateStats: () => {
                Run.max = 100 + (Player.stats.hp * 20); Run.atk = 10 + (Player.stats.atk * 5); Run.def = Player.stats.def * 2;
                if(Player.eq.weapon) Run.atk += Player.eq.weapon.s;
                if(Player.eq.head) Run.max += Player.eq.head.s;
                Player.skills.forEach(s => {
                    if(s.id === 'fire') Run.atk += (s.lvl * 5);
                    if(s.id === 'shield') Run.def += (s.lvl * 2);
                });
            },

            fusion: () => {
                let counts = {}; Player.inv.forEach(i => counts[i.n] = (counts[i.n] || 0) + 1);
                for(let n in counts) {
                    if(counts[n] >= 3) {
                        let it = Player.inv.find(x => x.n === n);
                        Player.inv = Player.inv.filter(x => x.n !== n);
                        Player.inv.push({...it, s: it.s * 2, n: it.n + "+"});
                        document.getElementById('flash').style.opacity = '0.5';
                        setTimeout(() => document.getElementById('flash').style.opacity = '0', 100);
                        UI.toast("FUSION R√âUSSIE !"); Core.fusion(); break;
                    }
                }
                UI.refresh(); Core.saveGame();
            },

            chest: () => { if(Player.perls >= 5) { Player.perls -= 5; Player.inv.push({...DATA.items[Math.floor(Math.random()*DATA.items.length)], uid: Date.now()}); UI.refresh(); Core.saveGame(); } },
            equip: (uid) => {
                let idx = Player.inv.findIndex(x => x.uid === uid); let it = Player.inv[idx]; let type = it.t;
                if(Player.eq[type]) Player.inv.push(Player.eq[type]); Player.eq[type] = it; Player.inv.splice(idx, 1);
                Core.updateStats(); UI.refresh(); Core.saveGame();
            },

            addSkill: (id) => {
                let existing = Player.skills.find(x => x.id === id);
                if(existing) existing.lvl++; else Player.skills.push({id: id, lvl: 1});
                UI.hideModal(); UI.refresh(); Core.checkAuto();
            },

            upgradeBase: (s) => {
                let c = 100 + (Player.stats[s] * 50);
                if(Player.gold >= c) { Player.gold -= c; Player.stats[s]++; UI.refresh(); Core.saveGame(); UI.toast("UPGRADE OK"); }
            },

            toggleAuto: () => { Run.auto = !Run.auto; UI.refresh(); if(Run.auto) Core.processScanner(); },
            toggleSpeed: () => { Run.speed = (Run.speed === 1) ? 2 : 1; UI.refresh(); },
            checkAuto: () => { if(Run.auto && Run.active && !Combat.active && document.getElementById('modal-container').classList.contains('hidden')) setTimeout(() => Core.processScanner(), 1000/Run.speed); },
            saveGame: () => localStorage.setItem('distory_v50', JSON.stringify(Player)),
            hardReset: () => { if(confirm("Supprimer toute la m√©moire ?")) { localStorage.clear(); location.reload(); } }
        };

        const UI = {
            refresh: () => {
                document.getElementById('ui-avatar-display').innerText = Player.char || "?";
                document.getElementById('ui-hero-center').innerText = Player.char || "?";
                document.getElementById('ui-gold').innerText = Player.gold;
                document.getElementById('ui-perls').innerText = Player.perls;
                document.getElementById('ui-day').innerText = Run.day;
                document.getElementById('ui-atk').innerText = Run.atk;
                document.getElementById('ui-def').innerText = Run.def;
                document.getElementById('ui-hp-txt').innerText = Math.floor(Run.hp) + "/" + Run.max;
                document.getElementById('ui-hp-fill').style.width = (Run.hp/Run.max*100) + "%";
                document.getElementById('ui-auto').innerText = "AUTO: " + (Run.auto ? "ON" : "OFF");
                document.getElementById('ui-auto').style.borderColor = Run.auto ? "var(--cyan)" : "var(--border)";
                document.getElementById('ui-speed').innerText = "VIT: x" + Run.speed;
                let g = document.getElementById('inv-grid'); g.innerHTML = '';
                Player.inv.forEach(i => {
                    let d = document.createElement('div'); d.className = "h-12 border border-purple-900 bg-black/40 flex items-center justify-center text-xl cursor-pointer hover:border-cyan-400 transition-all rounded"; d.innerText = i.e;
                    d.onclick = () => Core.equip(i.uid);
                    d.onmouseenter = (e) => UI.tip(e, i.n, i.d);
                    d.onmouseleave = UI.untip;
                    g.appendChild(d);
                });
                const set = (id, it) => {
                    let el = document.getElementById(id);
                    if(it) { el.innerText = it.e; el.style.borderColor = "var(--cyan)"; el.onmouseenter = (e) => UI.tip(e, it.n, it.d); el.onmouseleave = UI.untip; }
                    else { el.style.borderColor = "var(--border)"; el.onmouseenter = null; }
                };
                set('slot-weapon', Player.eq.weapon); set('slot-head', Player.eq.head); set('slot-pet', Player.eq.pet);
                let sl = document.getElementById('skill-list'); sl.innerHTML = '';
                Player.skills.forEach(s => {
                    let info = DATA.skills[s.id];
                    sl.innerHTML += `<div class="p-3 border-l-2 border-purple-500 bg-white/5 cursor-help transition-all hover:bg-white/10" onmouseenter="UI.tip(event, '${info.n}', '${info.d}')" onmouseleave="UI.untip()">
                        <div class="font-bold text-[10px] text-white uppercase">${info.n} <span class="float-right text-purple-500">NV.${s.lvl}</span></div>
                    </div>`;
                });
                ['hp','atk','def'].forEach(k => document.getElementById('up-'+k+'-cost').innerText = (100 + Player.stats[k]*50) + " ü™ô");
            },
            scene: (s) => { document.getElementById('enemy-box').classList.toggle('hidden', s !== 'com'); document.getElementById('story-box').classList.toggle('hidden', s === 'com'); },
            showSkillChoice: () => {
                let keys = Object.keys(DATA.skills);
                let m = document.getElementById('modal-container'); m.classList.remove('hidden');
                m.innerHTML = `<div class="fixed inset-0 bg-black/95 z-[60000] flex flex-col items-center justify-center p-10">
                    <div class="label-tech mb-8 text-cyan-400 animate-pulse">UPGRADE_REQUIRED</div>
                    <div class="grid grid-cols-1 gap-4 w-80">
                        ${keys.map(k => `<div onclick="Core.addSkill('${k}')" class="p-4 border border-purple-900 bg-white/5 hover:border-cyan-400 cursor-pointer transition-all group">
                            <div class="text-3xl mb-2 group-hover:scale-110 transition-transform">${DATA.skills[k].i}</div><div class="font-bold text-white uppercase text-xs">${DATA.skills[k].n}</div>
                        </div>`).join('')}
                    </div></div>`;
            },
            modal: (t) => {
                if(t==='settings') {
                    let m = document.getElementById('modal-container'); m.classList.remove('hidden');
                    m.innerHTML = `<div class="fixed inset-0 bg-black/95 z-[60000] flex flex-col items-center justify-center">
                        <div class="label-tech mb-10">System_Control</div>
                        <button onclick="UI.hideModal()" class="btn-exe w-64 mb-4">Reprendre</button>
                        <button onclick="location.reload()" class="text-[10px] text-gray-600 hover:text-white uppercase tracking-widest transition">Red√©marrer</button>
                    </div>`;
                }
            },
            hideModal: () => document.getElementById('modal-container').classList.add('hidden'),
            showHub: () => document.getElementById('hub-view').classList.remove('hidden'),
            hideHub: () => document.getElementById('hub-view').classList.add('hidden'),
            toast: (m) => { let d=document.createElement('div'); d.className="toast"; d.innerText=m; document.getElementById('toast-layer').appendChild(d); setTimeout(()=>d.remove(),2000); },
            tip: (e, t, d) => { let tt=document.getElementById('tooltip'); tt.innerHTML=`<b class="text-cyan-400">${t}</b><br><span class="text-gray-400">${d}</span>`; tt.style.display="block"; tt.style.left=(e.clientX+20)+"px"; tt.style.top=(e.clientY+20)+"px"; },
            untip: () => document.getElementById('tooltip').style.display="none",
            shake: (id) => { const el = document.getElementById(id); el.classList.add('shake'); setTimeout(()=>el.classList.remove('shake'), 200); }
        };
        window.onload = Core.initGame;
    </script>
</body>
</html>
