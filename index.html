<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Capybara Go â€“ Mini HTML Clone</title>
<style>
  body {
    margin: 0;
    background: #0f0f1a;
    color: white;
    font-family: monospace;
    text-align: center;
  }
  canvas {
    background: #1b1b2f;
    display: block;
    margin: auto;
  }
  #ui {
    padding: 10px;
  }
  button {
    margin: 5px;
    padding: 10px;
    background: #6a5acd;
    color: white;
    border: none;
    cursor: pointer;
  }
</style>
</head>
<body>

<h2>ðŸ¦« Capybara Go â€“ HTML Edition</h2>
<canvas id="game" width="480" height="320"></canvas>

<div id="ui"></div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const ui = document.getElementById("ui");

let gameSpeed = 1;

// PLAYER
const player = {
  x: 50,
  y: 160,
  hp: 100,
  maxHp: 100,
  atk: 10,
  level: 1,
  xp: 0,
  xpMax: 20
};

// ENEMY
let enemy = spawnEnemy();

function spawnEnemy() {
  return {
    x: 380,
    y: 160,
    hp: 30 + player.level * 5,
    atk: 5 + player.level
  };
}

// GAME LOOP
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

function update() {
  // AUTO MOVE
  player.x += 0.3 * gameSpeed;
  if (player.x > 200) player.x = 200;

  // AUTO ATTACK
  enemy.hp -= player.atk * 0.02 * gameSpeed;
  player.hp -= enemy.atk * 0.01 * gameSpeed;

  // ENEMY DEAD
  if (enemy.hp <= 0) {
    player.xp += 10;
    enemy = spawnEnemy();
  }

  // PLAYER DEAD (RESET)
  if (player.hp <= 0) {
    player.hp = player.maxHp;
    player.xp = 0;
    player.level = 1;
    player.atk = 10;
  }

  // LEVEL UP
  if (player.xp >= player.xpMax) {
    player.xp = 0;
    player.level++;
    player.xpMax += 10;
    showLevelUp();
  }
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // PLAYER
  ctx.fillStyle = "lime";
  ctx.fillText("ðŸ¦«", player.x, player.y);

  // ENEMY
  ctx.fillStyle = "red";
  ctx.fillText("ðŸ‘¾", enemy.x, enemy.y);

  // UI
  ctx.fillStyle = "white";
  ctx.fillText(`HP: ${Math.floor(player.hp)}`, 10, 20);
  ctx.fillText(`ATK: ${player.atk}`, 10, 40);
  ctx.fillText(`LVL: ${player.level}`, 10, 60);
  ctx.fillText(`XP: ${player.xp}/${player.xpMax}`, 10, 80);
}

function showLevelUp() {
  ui.innerHTML = `
    <h3>âœ¨ LEVEL UP âœ¨</h3>
    <button onclick="upgrade('atk')">+5 ATK</button>
    <button onclick="upgrade('hp')">+20 HP</button>
    <button onclick="upgrade('speed')">+Speed</button>
  `;
}

function upgrade(type) {
  if (type === "atk") player.atk += 5;
  if (type === "hp") {
    player.maxHp += 20;
    player.hp = player.maxHp;
  }
  if (type === "speed") gameSpeed += 0.2;

  ui.innerHTML = "";
}

loop();
</script>
</body>
</html>
